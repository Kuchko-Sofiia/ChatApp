@page "/allusers"
@using ChatApp.Blazor.Data;
@using ChatApp.Blazor.Services.Interfaces;

@inject IUserService UserService

<RadzenDataGrid AllowFiltering="true" AllowColumnResize="true" AllowAlternatingRows="false" FilterMode="FilterMode.Advanced" AllowSorting="true" PageSize="5" AllowPaging="true" PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true"
                Data="@_usersList" TItem="UserInfoDTO" ColumnWidth="300px" LogicalFilterOperator="LogicalFilterOperator.Or">
    <Columns>
        <RadzenDataGridColumn TItem="UserInfoDTO" Title="UserName" Property="UserName" Filterable="true" Frozen="true" Width="80px" TextAlign="TextAlign.Center" />
        <RadzenDataGridColumn TItem="UserInfoDTO" Title="Email" Property="Email" Filterable="true" Frozen="true" Width="80px" TextAlign="TextAlign.Center" />
        <RadzenDataGridColumn TItem="UserInfoDTO" Title="First Name" Property="FirstName" Filterable="true" Frozen="true" Width="80px" TextAlign="TextAlign.Center" />
        <RadzenDataGridColumn TItem="UserInfoDTO" Title="Last Name" Property="LastName" Filterable="true" Frozen="true" Width="80px" TextAlign="TextAlign.Center" />
        <RadzenDataGridColumn TItem="UserInfoDTO" Title="Phone Number" Property="PhoneNumber" Filterable="true" Frozen="true" Width="80px" TextAlign="TextAlign.Center" />
    </Columns>
</RadzenDataGrid>

@code {
    private IEnumerable<UserInfoDTO>? _usersList;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            _usersList = await UserService.GetAllUsersAsync();
            StateHasChanged();
        }
    }
}